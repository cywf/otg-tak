# OTG-TAK Documentation Site

Multi-page documentation and visualization site built with Astro, React, TailwindCSS, and daisyUI.

## ğŸš€ Quick Start

### Prerequisites
- Node.js 20 LTS
- npm

### Development

```bash
# Install dependencies
npm ci

# Fetch data (requires GITHUB_TOKEN for full data)
npm run fetch-data

# Start development server
npm run dev
```

Visit `http://localhost:4321/otg-tak/` in your browser.

### Build

```bash
# Build for production
npm run build

# Preview production build
npm run preview
```

### Type Checking

```bash
npm run typecheck
```

## ğŸ“ Project Structure

```
site/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ data/           # JSON data files (generated by scripts)
â”‚   â”œâ”€â”€ diagrams/       # Mermaid .mmd files (copied from /mermaid/)
â”‚   â””â”€â”€ favicon.svg
â”œâ”€â”€ scripts/            # Data fetching scripts
â”‚   â”œâ”€â”€ fetch_repo_data.ts
â”‚   â”œâ”€â”€ fetch_discussions.ts
â”‚   â”œâ”€â”€ fetch_projects.ts
â”‚   â””â”€â”€ scan_modules.ts
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/     # React components
â”‚   â”‚   â”œâ”€â”€ ThemeSwitcher.tsx
â”‚   â”‚   â”œâ”€â”€ StatisticsCharts.tsx
â”‚   â”‚   â”œâ”€â”€ DiscussionsList.tsx
â”‚   â”‚   â”œâ”€â”€ DevelopmentBoard.tsx
â”‚   â”‚   â””â”€â”€ MermaidViewer.tsx
â”‚   â”œâ”€â”€ layouts/        # Astro layouts
â”‚   â”‚   â””â”€â”€ BaseLayout.astro
â”‚   â”œâ”€â”€ pages/          # Routes (file-based routing)
â”‚   â”‚   â”œâ”€â”€ index.astro
â”‚   â”‚   â”œâ”€â”€ statistics.astro
â”‚   â”‚   â”œâ”€â”€ discussions.astro
â”‚   â”‚   â”œâ”€â”€ development-board.astro
â”‚   â”‚   â”œâ”€â”€ create-issue.astro
â”‚   â”‚   â”œâ”€â”€ visualizer.astro
â”‚   â”‚   â”œâ”€â”€ docs/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.astro
â”‚   â”‚   â”‚   â””â”€â”€ [slug].astro
â”‚   â”‚   â””â”€â”€ 404.astro
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ global.css
â”œâ”€â”€ astro.config.mjs
â”œâ”€â”€ tailwind.config.mjs
â””â”€â”€ tsconfig.json
```

## ğŸ¨ Themes

The site includes 7 selectable dark/neon themes:
- nightfall (default)
- dracula
- cyberpunk
- dark-neon
- hackerman
- gamecore
- neon-accent

Theme preference is persisted to `localStorage` and respects `prefers-color-scheme` on first load.

## ğŸ“Š Data Sources

Data is fetched from GitHub API during CI build:
- **Repository Stats**: Stars, forks, watchers, languages, commit activity
- **Discussions**: Latest 25 discussions with metadata
- **Projects**: GitHub Projects v2 or issues grouped by status labels
- **Modules**: Directory structure of ansible, terraform, backend, frontend

### Local Development

For local development without GitHub tokens, placeholder data is provided in `public/data/`.

## ğŸ”§ Configuration

### Base Path

The site is configured for GitHub Pages deployment at `https://cywf.github.io/otg-tak/`. 

The base path `/otg-tak` is set in `astro.config.mjs` and all routes/assets use this prefix.

### Environment Variables

Create `.env` file:
```env
PUBLIC_DEFAULT_THEME=nightfall
```

## ğŸš¢ Deployment

Deployment is automated via GitHub Actions (`.github/workflows/pages.yml`):

1. Checkout repository
2. Setup Node.js 20
3. Install dependencies (`npm ci`)
4. Fetch data from GitHub API
5. Build site (`npm run build`)
6. Run Lighthouse CI
7. Deploy to GitHub Pages

## ğŸ“ Adding Content

### Documentation

1. Edit markdown files in repository root: `INSTALL.md`, `PROJECT_SUMMARY.md`, `REPO_STRUCTURE.md`, `CONTRIBUTING.md`
2. Changes automatically render at `/docs/[filename]`

### Mermaid Diagrams

1. Add `.mmd` files to `/mermaid/` directory in repository root
2. Diagrams are automatically copied to `public/diagrams/` during build
3. They appear on the `/visualizer` page

## ğŸ§ª Testing

Build the site locally to test:
```bash
npm run build
npm run preview
```

Then visit `http://localhost:4321/otg-tak/` to verify all pages work correctly.

## ğŸ“¦ Technologies

- **Astro 5.x**: Static site generator
- **React 18**: Interactive components
- **TailwindCSS 3.x**: Utility-first CSS
- **daisyUI 5.x**: Component library
- **Chart.js**: Statistics visualization
- **Mermaid**: Diagram rendering
- **Marked**: Markdown parsing
